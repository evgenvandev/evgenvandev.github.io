---
layout: default
title: MySQL
nav_order: 50
has_children: true
has_toc: false
permalink: /docs/mysql
---

# MySQL
{: .no_toc}

Система управления базами данных (СУБД) MySQ представляет собой СУБД с открытым кодом, разработкой которой занимается корпорация 
MySQL AB. СУБД MySQL успешно работает под управлением свыше 20 различных операционных систем (Windows, Linux, OS/2, Mac OS X, и др.), 
а также предоставляет интерфейс для взаимодействия с множеством языков программирования: C, C++, Eiffel, Java, Perl, PHP, Python, Ruby и Tcl. 

Принимая во внимание тот факт, что это одна из немногих СУБД с открытым кодом, и лицензионное соглашение, по которому она распространяется, 
не требует денежных отчислений (исключением является случай, когда MySQL входит в состав коммерческого продукта), не удивительно, что она 
получила широкое распространение в Российской Федерации. В частности MySQL является стандартом де-факто у российских хост провайдеров. 

На сегодняшний день MySQL, наряду с СУБД Oracle, является одной из самых быстрых баз данных. В версии MySQL 5.0 была достигнута функциональность, 
доступная ранее только в коммерческих базах данных. Так введены долгожданные вложенные запросы, хранимые процедуры, курсоры, обработчики 
ошибок, триггеры, представления и множество новых внутренних функций. 

MySQL имеет клиент-серверную архитектуру: к серверу MySQL могут обращаться различные клиентские приложения, в том числе с удалённых 
компьютеров. 

## Оглавление
{: .no_toc .text-delta}

1. TOC
{:toc}

---

## Установка MySQL-8.2.0 

[Оригинал статьи](https://habr.com/ru/articles/755718/)

Будем устанавливать MySQL-8.2.0 без графического установщика, т.е. `noinstall`-версию, используя командную строку. 

### Загрузка и распаковка в каталог

Традиционно файлы сервера MySQL принято распаковывать в директорию `C:\mysql`. При этом согласно официальной документации для 
размещения файлов того же сервера автоматический установщик по умолчанию использует путь `C:\Program Files\MySQL`. 
Если необходимо разместить файлы сервера в другой директории, официальное руководство рекомендует скорректировать путь к каталогу 
во время запуска установщика, или прописать его в конфигурационном файле заранее ([ https://dev.mysql.com/doc/refman/8.0/en/windows-extract-archive.html](https://dev.mysql.com/doc/refman/8.0/en/windows-extract-archive.html)). 
Несколько сомнительная рекомендация, учитывая, что она дана в разделе по установке `noinstall` (неинсталлируемой) версии. А в актуальных версиях 
установщика с графическим интерфейсом отсутствует возможность изменить путь установки в процессе инсталяции. Очевидно, это возможно 
сделать, запустив консольный вариант установщика в пошаговом режиме. 

Перед размещением файлов сервера на компьютере предлагается загрузить архив с `noinstall`-версией со страницы загрузки официального 
сайта [MySQL](https://dev.mysql.com/downloads/mysql/). 

![Загрузка MySQL с официального сайта]({{ site.url }}{{ site.baseurl }}/assets/images/mysql/download_mysql-1.jpg "Загрузка MySQL с официального сайта")

После нажатия на кнопку `Download` откроется страница загрузки, где будет предложено зарегистрироваться, либо авторизоваться на сайте. 
Также Oracle не сильно обидется, если проигнорировать предложенные любезности, нажав соответствующую надпись 
`No thanks, just start my download` - над подвалом (footer) страницы. 

![Загрузка MySQL с официального сайта - отказ от регистрации]({{ site.url }}{{ site.baseurl }}/assets/images/mysql/download_mysql-2.jpg "Загрузка MySQL с официального сайта - отказ от регистрации") 

Начнётся загрузка архива `mysql-8.2.0-winx64.zip`. Распаковать архив с сервером рекомендуется в стандартный каталог `C:\mysql` таким образом, 
чтобы корневым каталогом для всего содержимого явилась директория `mysql`.   
У меня папка `C:\MySQL` уже содержит папку с MySQL-5.5, 

![Содержимое папки MySQL]({{ site.url }}{{ site.baseurl }}/assets/images/mysql/mysql_folder_content-1.jpg "Содержимое папки MySQL")

поэтому распакуем файлы MySQL-8.2.0 в папку с названием скаченного архива `C:\MySQL\mysql-8.2.0-winx64`: 

![Содержимое папки MySQL с MySQL-8.2.0]({{ site.url }}{{ site.baseurl }}/assets/images/mysql/mysql_folder_content-2.jpg "Содержимое папки MySQL с MySQL-8.2.0")

Содержимое распакованного архива получилось следующее: 

![Содержимое папки mysql-8.2.0-winx64]({{ site.url }}{{ site.baseurl }}/assets/images/mysql/mysql-8.2.0-winx64_folder_content-1.jpg "Содержимое папки mysql-8.2.0-winx64")

Таким образом корневым каталогом для MySQL-8.2.0 является папка `C:\MySQL\mysql-8.2.0-winx64`.

### Создание и размещение конфигурационного файла 

Конфигурационный файл формата `.ini` или `.cnf` необходим для задания начальных параметров при запуске сервера СУБД. Руководство рекомендует 
именовать его `my` и размещать в корневом каталоге MySQL-8.2.0 (`C:\MySQL\mysql-8.2.0-winx64`). По заверениям руководства этот файл необходим 
только при работе в операционной системе Windows. Но при большом желании то же руководство допускает конфигурирование работы СУБД в Linux 
аналогичным способом.   
Конфигурирование параметров запуска сервера MySQL включает прописывание путей каталогов хранения файлов сервера и баз данных, задания параметров 
использования памяти, кэша и движка хранилища InnoDB.   
При запуске MySQL-сервера в Windows, он будет искать конфигурационный файл в нескольких местах: 
- директория с файлами операционной системы Windows, 
- корневой каталог загрузочного диска `C:\`, 
- директория установки/распаковки файлов сервера MySQL-8.2.0 (`C:\MySQL\mysql-8.2.0-winx64`). 

![Пути поиска конфигурационного файла в Windows]({{ site.url }}{{ site.baseurl }}/assets/images/mysql/directories_for_search_my_ini_file.jpg "Пути поиска конфигурационного файла в Windows")

На разных ПК имя корневой директории операционной системы Windows, а также путь до неё могут отличаться. 
Стандартный путь `C:\Windows`. Для уточнения пути на конкретной машине необходимо воспользоваться командой 

```
echo %WINDIR%
```

в консоли. 

![Путь установки Windows]({{ site.url }}{{ site.baseurl }}/assets/images/mysql/echo_windir.jpg "Путь установки Windows")

Первым, при запуске, сервер СУБД будет искать конфигурационный файл `my.ini`, затем - `my.cnf`, если 
не найдёт первый. Во избежание конфликтных ситуаций рекомендуется использовать только один из них. 
Если диск `C:\` не является загрузочным на эксплуатируемой машине, единственный вариант - использовать 
файл `my.ini`. 

Но в данном случае нас интересует запись, начинающаяся с `BASEDIR` (3-я сверху запись в списке каталогов для 
поиска конфигурационных файлов). Как выяснится далее, именно эта глобальная опция отвечает за возможность 
размещения конфигурационного файла `my.ini` в корневой директории `C:\MySQL\mysql-8.2.0-winx64`, что на первый 
взгляд кажется весьма удобным решением. Создадим файл `my.ini` в корневой директории сервера MySQL `C:\MySQL\mysql-8.2.0-winx64`. 

![Создание файла my.ini]({{ site.url }}{{ site.baseurl }}/assets/images/mysql/create_file_my_ini.jpg "Создание файла my.ini")

Конфигурационный файл создаётся в любом простейшем текстовом редакторе, например, блокноте, и содержит следующие 
минимальные опции: 

![Содержание файла my.ini]({{ site.url }}{{ site.baseurl }}/assets/images/mysql/content_of_file_my_ini.jpg "Содержание файла my.ini")

где: 
- `basedir` - путь к каталогу с распакованными файлами сервера MySQL, в данном случае `basedir=C:\\MySQL\\mysql-8.2.0-winx64` 
- `datadir` - путь к каталогу с базами данных, в данном случае `datadir=C:\\MySQL\\mysql-8.2.0-winx64\\data`, каталог `data` 
пока не создан в каталоге `C:\\MySQL\\mysql-8.2.0-winx64`

При написании пути к каталогам используем экранирование обратного слэша. 

### Инициализация директории data и заполнение системных словарей

Поскольку в ZIP-архиве MySQL изначально отсутствует каталог `data`, его необходимо создать вручную. В противном 
случае при запуске в консоли файла `c:\MySQL\mysql-8.2.0-winx64\bin\mysqld.exe` (собственно, и есть файл запуска сервера) СУБД выдаст ошибки, 
связанные с невозможностью создания тестового файла в директории `data` и доступа к каталогу `data`. 

![Ошибка запуска mysqld.exe без каталога data]({{ site.url }}{{ site.baseurl }}/assets/images/mysql/run_mysqld_error_data_folder.jpg "Ошибка запуска mysqld.exe без каталога data")

